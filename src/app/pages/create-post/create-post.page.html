 
<ion-header class="custom-header">

  <ion-toolbar class="custom-toolbar">
    <ion-title style="font-size:16px"> <ion-icon name="create"></ion-icon> &nbsp; {{pageHeader}}</ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="logout()" style="font-size:24px">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

  </ion-toolbar>

</ion-header>



<ion-content class="create-post">
  <ion-row>
  <ion-col size="12">
            <div *ngIf="!isFromSpeakerListPage" class="ion-text-center">
                    <img *ngIf="isImagefinalized"  class="sml-cls-cropped-img" src="{{finalizedImageUrl}}">
                    <img *ngIf="!isImageCropped" class="slide-img" src="../../../assets/icons/story1.PNG">
                    <div *ngIf="isImageCropperShown && !isImagefinalized">
                      <image-cropper 
                        [imageChangedEvent]="imageChangedEvent"
                        [maintainAspectRatio]="true"
                        [aspectRatio]="4 / 4"
                        [resizeToWidth]="210"
                        format="png"
                        (imageCropped)="imageCropped($event)"
                        (imageLoaded)="imageLoaded($event)"
                        (cropperReady)="cropperReady($event)"          
                        (loadImageFailed)="loadImageFailed()"
                    ></image-cropper>
                  </div>
                </div>
                <div *ngIf="isFromSpeakerListPage" class="ion-text-center">
                  <img  *ngIf="showPreview"   class="sml-cls-cropped-img" src="{{finalizedImageUrl}}">
                  <div *ngIf="isImageCropperShown && !isImagefinalized">
                    <image-cropper class="sml-cls-cropped-img" [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="true"
                      [aspectRatio]="4 / 4" [resizeToWidth]="225" format="png" (imageCropped)="imageCropped($event)"
                      (imageLoaded)="imageLoaded($event)" (cropperReady)="cropperReady($event)" (loadImageFailed)="loadImageFailed()">
                    </image-cropper>
                  </div> 
                </div>
                <input id="uploadBtn" style="display: none" #hiddenfileinput type="file" class="upload"
                  (change)="fileChangeEvent($event)" />
                <ion-button *ngIf="isFromSpeakerListPage && !isImagefinalized && userType !=='V' && userType !==''"
                  style="margin-left:125px;margin-top: -56px" color="danger" (click)="hiddenfileinput.click()"
                  class="ion-color md button button-solid ion-activatable ion-focusable hydrated ion-color-dark">
                  <ion-icon name="cloud-upload" slot="start"></ion-icon> Upload
                </ion-button>
   </ion-col>

 </ion-row>
  <div class="about-info">

    

    <h3 class="ion-padding-top ion-padding-start">Details</h3>

    <ion-list lines="none" style="margin-top:10%">
      <ion-item>
        <ion-label class="field-text" position="floating">Story Title</ion-label>
        <ion-input (ionBlur)="istitleAlreadyExist($event)" class="ion-cust-text" [(ngModel)]="title" #ref > </ion-input>
        <div *ngIf="result !=='' && result !== undefined" style="color:red" role="alert">
          {{result}}
        </div> 
        <ion-icon slot="start" src='../../../assets/icons/script.svg'></ion-icon>
      </ion-item>
      <ion-item *ngIf="userType!='V'">
        <ion-label class="field-text" position="floating">Budget</ion-label>
        <ion-input class="ion-cust-text" type="number" [(ngModel)]="budget"></ion-input>
        <ion-icon slot="start" src='../../../assets/icons/rupee-indian.svg'></ion-icon>
      </ion-item>
      <ion-item>
        <ion-label class="field-text" position="floating">Story Description(Max 50 words)</ion-label>
        <ion-textarea class="ion-cust-text" maxlength="450" rows="4" cols="27" [(ngModel)]="synopsis"></ion-textarea>
        <ion-icon name="library" slot="start"></ion-icon>
      </ion-item>
      <ion-item style="margin-left: 58px;color: black !important;">Story Visibility</ion-item>
      <ion-item style="margin-top: -13px;" *ngIf="userType!='V'">  
         <ion-label style="margin-right:-87px !important;color:black !important" >Public</ion-label>
        <ion-toggle  [(ngModel)]="storyVisibility"></ion-toggle>
        <ion-label  style="color:black !important">Certified Producer</ion-label>  
        <ion-icon slot="start" src='../../../assets/icons/storyVisibility.svg'></ion-icon>    
      </ion-item>
    </ion-list>
    <ion-item-divider style="margin-top: 42px;border: none;">

      <ion-fab vertical="bottom" horizontal="end">
        <ion-fab-button [disabled]="isPosted" color="dark">
          <ion-icon  name="send" (click)="presentFundType()"></ion-icon>
        </ion-fab-button>
      </ion-fab>
      <!-- <input id="uploadBtn" style="display: none" #hiddenfileinput type="file" class="upload"
        (change)="uploadFile($event.target.files)" /> -->
        <input id="uploadBtn" style="display: none" #hiddenfileinput type="file" class="upload"
        (change)="fileChangeEvent($event)" />
        
      
        
      <ion-fab vertical="bottom" horizontal="left">
        <ion-fab-button color="medium">
          <ion-icon name="document-attach" (click)="hiddenfileinput.click()"></ion-icon>
          <p class="badge-cls" *ngIf="isUploaded">1</p>
        </ion-fab-button>

      </ion-fab>

    </ion-item-divider>

  </div>

</ion-content>